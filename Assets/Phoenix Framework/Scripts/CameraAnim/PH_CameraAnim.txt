-- Created by Jake K (JakeSayingWoosh) - Wooshcrew.com / Copyright 2020
behaviour("PH_CameraAnim")

function PH_CameraAnim:OnEnable()
	_G.PhoenixData.GetString(_G.currentWeaponData, "projectName", false, "#Project-Name", true, "warning", "Missing <color=#ffff00ff>'projectName'</color> String!", "Make sure to have your <color=#ffff00ff>'projectName'</color> on the base weapon's Data Container!")
	self.cameraAnimProxy = _G.PhoenixData.GetGameObject(_G.currentWeaponData, "cameraAnimProxy", true, "error", "Missing <color=#ffff00ff>'cameraAnimProxy'</color> GameObject!", "You have to have the <color=#ffff00ff>'cameraAnimProxy'</color> on your  base weapon's Data Container or else mega bugs will happen!").gameObject
end

function PH_CameraAnim:Update()
	if not Player.actor.isSwimming and not Player.actor.isDead and not Player.actor.isFallenOver and Player.actor.isInWater == false and Player.actor.isOnLadder == false then
		local rotationFromProxy = self.cameraAnimProxy.transform.localRotation.eulerAngles -- Player.actor.activeWeapon.gameObject.GetComponent(DataContainer).GetGameObject("cameraAnimProxy").gameObject.transform.localRotation.eulerAngles
		PlayerCamera.fpCameraLocalRotation = Quaternion.Euler(Vector3(rotationFromProxy.x, rotationFromProxy.z, rotationFromProxy.y * -1))
	end
end

function PH_CameraAnim:OnDisable()
	PlayerCamera.fpCameraLocalRotation = Quaternion.Euler(0, 0, 0)
end
